<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="http://vjs.zencdn.net/6.4.0/video-js.css" rel="stylesheet">
    <script>

        var myPlayer = videojs('my-player');


        var url = 'wss://leonid-da.herokuapp.com/ws';
        var ws = new WebSocket(url);
        setInterval(sendMessage, 5);

        function sendMessage(){
            if (ws.readyState === 1) {
                ws.send("");
                return;

            } else {
                console.log("wait for connection...")
            }
        }


        ws.onconnect = function(e) {
            console.log("connected");
        };
        ws.onerror = function (error) {
            console.log('WebSocket Error ' + error);
        };
        ws.onclose = function(event){
            console.log("Remote host closed or refused WebSocket connection");
            console.log(event);
        };
        ws.onmessage = function(message) {
            myPlayer.src(message + ".mp4");
            myPlayer.play();
        };
    </script>
</head>
<body style="margin-top: 0; margin-left: 0; margin-bottom: 0; margin-right: 0; background-color: #343333">
<!--<img id="tmp" src="LeonidStandUpPic.jpg">!-->
<video id="my-player" class="video-js">
    <source src="LeonidStandUp.mp4" type="video/mp4">
</video>
</body>
</html>